{
  "skill": "construct3-event-sheet",
  "version": "1.0.0",
  "evaluations": [
    {
      "id": "basic-trigger",
      "name": "基础触发测试",
      "query": "生成一个 Construct 3 事件表 JSON，实现每2秒在屏幕中央创建一个 Sprite",
      "expected_behavior": [
        "生成包含 is-c3-clipboard-data: true 的 JSON",
        "使用 System.every-x-seconds 条件，interval-seconds 为 2",
        "使用 System.create-object 动作",
        "JSON 格式正确可直接粘贴到 C3 编辑器"
      ],
      "expected_output_contains": [
        "\"is-c3-clipboard-data\":true",
        "\"every-x-seconds\"",
        "\"create-object\"",
        "\"interval-seconds\":\"2\""
      ]
    },
    {
      "id": "keyboard-control",
      "name": "键盘控制测试",
      "query": "生成 WASD 键盘控制 Player 对象 8Direction 移动的事件表",
      "expected_behavior": [
        "使用正确的键码: W=87, A=65, S=83, D=68",
        "使用 Keyboard.key-is-down 条件",
        "使用 simulate-control 动作",
        "behaviorType 使用 '8Direction' 而非 'EightDir'"
      ],
      "expected_output_contains": [
        "\"key\":87",
        "\"key\":65",
        "\"key\":83",
        "\"key\":68",
        "\"behaviorType\":\"8Direction\"",
        "\"simulate-control\""
      ]
    },
    {
      "id": "platform-game",
      "name": "平台跳跃游戏测试",
      "query": "生成平台跳跃游戏的事件表：空格键跳跃、与 Enemy 碰撞时销毁 Enemy 并加分",
      "expected_behavior": [
        "使用 Platform 行为的 simulate-control jump",
        "使用 on-collision-with-another-object 条件",
        "使用 destroy 动作销毁 Enemy",
        "使用 add-to-eventvar 增加分数"
      ],
      "expected_output_contains": [
        "\"behaviorType\":\"Platform\"",
        "\"control\":\"jump\"",
        "\"on-collision-with-another-object\"",
        "\"destroy\"",
        "\"add-to-eventvar\""
      ]
    },
    {
      "id": "deprecated-warning",
      "name": "废弃功能警告测试",
      "query": "生成使用 Function 插件的调用函数事件",
      "expected_behavior": [
        "警告 Function 插件已废弃",
        "推荐使用内置 Functions 系统",
        "提供正确的 callFunction 语法或 Functions.FuncName() 表达式"
      ],
      "should_warn_about": ["Function 插件", "废弃", "Functions"]
    },
    {
      "id": "string-parameter",
      "name": "字符串参数格式测试",
      "query": "生成设置 Player 动画为 'Walk' 的事件",
      "expected_behavior": [
        "animation 参数使用内嵌引号格式",
        "正确格式: \"animation\": \"\\\"Walk\\\"\""
      ],
      "expected_output_contains": [
        "\"set-animation\"",
        "\"\\\"Walk\\\"\""
      ]
    },
    {
      "id": "tween-animation",
      "name": "Tween 动画测试",
      "query": "生成让 Sprite 在1秒内淡出 (opacity 变为0) 的 Tween 动画事件",
      "expected_behavior": [
        "使用 Tween.tween-one-property 动作",
        "property 为 opacity",
        "end-value 为 0",
        "time 为 1"
      ],
      "expected_output_contains": [
        "\"tween-one-property\"",
        "\"property\":\"opacity\"",
        "\"end-value\":\"0\"",
        "\"time\":\"1\""
      ]
    },
    {
      "id": "variable-definition",
      "name": "变量定义测试",
      "query": "生成定义一个名为 Score 的数字变量，初始值为 0",
      "expected_behavior": [
        "使用 eventType: variable",
        "包含必需的 comment 字段",
        "type 为 number"
      ],
      "expected_output_contains": [
        "\"eventType\":\"variable\"",
        "\"name\":\"Score\"",
        "\"comment\":\"\""
      ]
    },
    {
      "id": "comparison-operator",
      "name": "比较运算符测试",
      "query": "生成当 Score 大于 100 时显示 'You Win' 文本的事件",
      "expected_behavior": [
        "使用 System.compare-eventvar 条件",
        "comparison 值为 4 (大于)",
        "使用 Text.set-text 动作"
      ],
      "expected_output_contains": [
        "\"compare-eventvar\"",
        "\"comparison\":4",
        "\"set-text\""
      ]
    }
  ],
  "validation_script": "scripts/validate_skill.py"
}
