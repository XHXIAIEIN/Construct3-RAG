{
  "id": "cordovaiap",
  "originalId": "CORDOVAIAP",
  "name_zh": "应用内购",
  "name_en": "Mobile IAP",
  "description_zh": "在 iOS 和 Android 上通过 Cordova 处理应用内购功能 (IAP)。",
  "description_en": "Handle in-app purchases (IAP) for Cordova on iOS and Android.",
  "path": "monetisation/iap2",
  "categories": [
    "cordovaiap"
  ],
  "conditions": [
    {
      "id": "on-purchase-success",
      "name_zh": "购买成功",
      "name_en": "On purchase success",
      "description_zh": "成功购买特定产品ID时触发。",
      "description_en": "Triggered when a specific product ID has been purchased successfully.",
      "scriptName": "OnPurchaseSuccess",
      "isTrigger": true,
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "Product ID"
        }
      ]
    },
    {
      "id": "on-any-purchase-success",
      "name_zh": "任意产品购买成功",
      "name_en": "On any purchase success",
      "description_zh": "成功购买任何产品时触发。",
      "description_en": "Triggered when any product has been purchased successfully.",
      "scriptName": "OnAnyPurchaseSuccess",
      "isTrigger": true,
      "category": "cordovaiap"
    },
    {
      "id": "on-purchase-failed",
      "name_zh": "购买失败",
      "name_en": "On purchase failed",
      "description_zh": "无法购买特定产品ID时触发。",
      "description_en": "Triggered when a specific product ID has failed to be purchased.",
      "scriptName": "OnPurchaseFail",
      "isTrigger": true,
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "Product ID"
        }
      ]
    },
    {
      "id": "on-any-purchase-failed",
      "name_zh": "任意购买失败",
      "name_en": "On any purchase failed",
      "description_zh": "任何产品未能购买时触发。",
      "description_en": "Triggered when any product has failed to be purchased.",
      "scriptName": "OnAnyPurchaseFail",
      "isTrigger": true,
      "category": "cordovaiap"
    },
    {
      "id": "on-registration-success",
      "name_zh": "商店注册成功",
      "name_en": "On store registration success",
      "description_zh": "商店注册成功时触发。",
      "description_en": "Triggered when store registration succeeds.",
      "scriptName": "OnRegistrationSuccess",
      "isTrigger": true,
      "category": "cordovaiap"
    },
    {
      "id": "on-registration-failure",
      "name_zh": "商店注册失败",
      "name_en": "On store registration failed",
      "description_zh": "存储注册失败时触发。",
      "description_en": "Triggered when store registration fails.",
      "scriptName": "OnRegistrationFail",
      "isTrigger": true,
      "category": "cordovaiap"
    },
    {
      "id": "product-owned",
      "name_zh": "产品存在",
      "name_en": "Has product",
      "description_zh": "检测当前用户是否已经购买了指定的产品ID。",
      "description_en": "True if the current user has purchased a given product ID.",
      "scriptName": "ProductOwned",
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "Product ID"
        }
      ]
    },
    {
      "id": "product-available",
      "name_zh": "产品可购买",
      "name_en": "Product available",
      "description_zh": "检测是否可以购买指定的产品。",
      "description_en": "True if the product can be purchased.",
      "scriptName": "ProductAvailable",
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "Product ID"
        }
      ]
    },
    {
      "id": "store-registered",
      "name_zh": "商店注册完成",
      "name_en": "Is registration complete",
      "description_zh": "检测商店是否已注册，并准备好发起购买请求。",
      "description_en": "True if the store has been registered and is ready to make purchase requests.",
      "scriptName": "StoreRegistered",
      "category": "cordovaiap"
    },
    {
      "id": "on-product-available",
      "name_zh": "产品可购买",
      "name_en": "On product available",
      "description_zh": "检查产品是否可供购买。",
      "description_en": "Triggered when the product becomes available for purchase.",
      "scriptName": "OnProductAvailable",
      "isTrigger": true,
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "Product ID"
        }
      ]
    },
    {
      "id": "on-any-product-available",
      "name_zh": "任意产品可购买",
      "name_en": "On any product available",
      "description_zh": "产品可供购买时触发。",
      "description_en": "Triggered when a product becomes available for purchase.",
      "scriptName": "OnAnyProductAvailable",
      "isTrigger": true,
      "category": "cordovaiap"
    },
    {
      "id": "on-product-owned",
      "name_zh": "已拥有产品",
      "name_en": "On product owned",
      "description_zh": "当指定的非消耗品被拥有时触发",
      "description_en": "Triggered when a specified non-consumable product becomes owned.",
      "scriptName": "OnProductOwned",
      "isTrigger": true,
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "Product ID"
        }
      ]
    },
    {
      "id": "on-any-product-owned",
      "name_zh": "拥有任意产品",
      "name_en": "On any product owned",
      "description_zh": "拥有任意非消耗品的产品时触发。",
      "description_en": "Triggered when a non-consumable product becomes owned.",
      "scriptName": "OnAnyProductOwned",
      "isTrigger": true,
      "category": "cordovaiap"
    },
    {
      "id": "on-transaction-finished",
      "name_zh": "交易完成",
      "name_en": "On transaction finished",
      "description_zh": "执行 '购买产品' 动作后，交易成功时触发，并返回 '订单ID' 表达式。",
      "description_en": "Triggered when a transaction finishes. The ID is available in the 'TransactionID' expression.",
      "scriptName": "OnTransactionFinished",
      "isTrigger": true,
      "category": "cordovaiap"
    }
  ],
  "actions": [
    {
      "id": "register-product",
      "name_zh": "添加产品",
      "name_en": "Add product ID",
      "description_zh": "添加要提供给应用内购买的产品。",
      "description_en": "Add the product IDs that the app will be using for IAP.",
      "scriptName": "RegisterProduct",
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "Product ID"
        },
        {
          "id": "product-type",
          "type": "combo",
          "name_zh": "产品类型",
          "name_en": "Product Type",
          "items": [
            "non-consumable",
            "consumable"
          ],
          "items_i18n": {
            "consumable": {
              "zh": "消耗品",
              "en": "Consumable"
            },
            "non-consumable": {
              "zh": "非消耗品",
              "en": "Non-consumable"
            }
          }
        }
      ]
    },
    {
      "id": "complete-registration",
      "name_zh": "完成产品注册",
      "name_en": "Complete product registration",
      "description_zh": "结束产品注册阶段，必须先调用此函数才能购买产品。",
      "description_en": "Complete the product registration stage.",
      "scriptName": "CompleteRegistration",
      "category": "cordovaiap"
    },
    {
      "id": "purchase-product",
      "name_zh": "购买产品",
      "name_en": "Purchase product",
      "description_zh": "提示用户购买产品。",
      "description_en": "Prompt the user to purchase a product.",
      "scriptName": "PurchaseProduct",
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "Product ID"
        }
      ]
    },
    {
      "id": "restore-purchases",
      "name_zh": "恢复购买",
      "name_en": "Restore purchases",
      "description_zh": "从商店恢复购买状态。",
      "description_en": "Restore the purchases state from the store.",
      "scriptName": "RestorePurchases",
      "category": "cordovaiap"
    },
    {
      "id": "set-public-key",
      "name_zh": "",
      "name_en": "",
      "description_zh": "",
      "description_en": "",
      "scriptName": "SetPublicKey",
      "isDeprecated": true,
      "category": "cordovaiap",
      "params": [
        {
          "id": "public-key",
          "type": "string",
          "name_zh": "",
          "name_en": ""
        }
      ]
    }
  ],
  "expressions": [
    {
      "id": "product-name",
      "name_zh": "",
      "name_en": "",
      "description_zh": "根据产品 ID 获取产品名称。",
      "description_en": "Return the name of a product from its ID.",
      "expressionName": "ProductName",
      "returnType": "string",
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "ProductID"
        }
      ]
    },
    {
      "id": "product-price",
      "name_zh": "",
      "name_en": "",
      "description_zh": "根据产品ID获取产品的格式化价格。",
      "description_en": "Return the formatted price of a product from its ID.",
      "expressionName": "ProductPrice",
      "returnType": "string",
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "ProductID"
        }
      ]
    },
    {
      "id": "product-description",
      "name_zh": "",
      "name_en": "",
      "description_zh": "在触发器中，相关的产品描述。",
      "description_en": "Return the description of a product from its ID.",
      "expressionName": "ProductDescription",
      "returnType": "string",
      "category": "cordovaiap",
      "params": [
        {
          "id": "product-id",
          "type": "string",
          "name_zh": "产品ID",
          "name_en": "ProductID"
        }
      ]
    },
    {
      "id": "product-id",
      "name_zh": "",
      "name_en": "",
      "description_zh": "在触发器中，相关的产品ID。",
      "description_en": "In a trigger, the relevant product ID.",
      "expressionName": "ProductID",
      "returnType": "string",
      "category": "cordovaiap"
    },
    {
      "id": "error-message",
      "name_zh": "",
      "name_en": "",
      "description_zh": "在触发器中，返回相关的错误消息。",
      "description_en": "In a trigger, an error message if available.",
      "expressionName": "ErrorMessage",
      "returnType": "string",
      "category": "cordovaiap"
    },
    {
      "id": "transaction-id",
      "name_zh": "",
      "name_en": "",
      "description_zh": "在 '交易完成' 条件中，完成的订单ID。",
      "description_en": "After 'On transaction finished', the ID of the last finished transaction.",
      "expressionName": "TransactionID",
      "returnType": "string",
      "category": "cordovaiap"
    },
    {
      "id": "transaction",
      "name_zh": "",
      "name_en": "",
      "description_zh": "",
      "description_en": "",
      "expressionName": "Transaction",
      "returnType": "string",
      "isDeprecated": true,
      "category": "cordovaiap"
    }
  ],
  "properties": [
    {
      "id": "validator-url",
      "name_zh": "验证服务器地址(可选)",
      "name_en": "Validator URL",
      "description_zh": "订单验证的服务器地址，用于验证是否完成购买。",
      "description_en": "Optional URL of receipt validation service to verify purchases with."
    }
  ],
  "productTypes": "games"
}