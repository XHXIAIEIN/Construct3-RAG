{
  "id": "los",
  "originalId": "LOS",
  "name_zh": "视线",
  "name_en": "Line of sight",
  "description_zh": "让对象可以看见某个位置或其他对象。",
  "description_en": "Test if an object has line of sight to (if it can \"\"see\"\") an object or position.",
  "path": "general/los",
  "categories": [],
  "conditions": [
    {
      "id": "has-los-to-object",
      "name_zh": "发现对象",
      "name_en": "Has LOS to object",
      "description_zh": "测试在视线范围内，可否看到某个对象。",
      "description_en": "Test if there is line-of-sight to any instance of an object type.",
      "scriptName": "HasLOSToObject",
      "params": [
        {
          "id": "object",
          "type": "object",
          "name_zh": "对象",
          "name_en": "Object"
        },
        {
          "id": "image-point",
          "type": "any",
          "name_zh": "图像点 (可选)",
          "name_en": "Image point (optional)"
        }
      ]
    },
    {
      "id": "has-los-to-position",
      "name_zh": "发现位置",
      "name_en": "Has LOS to position",
      "description_zh": "检测对象是否拥有场景的某个位置的视线。",
      "description_en": "Test if there is line-of-sight to a position in the layout.",
      "scriptName": "HasLOSToPosition",
      "params": [
        {
          "id": "x",
          "type": "number",
          "name_zh": "X",
          "name_en": "X"
        },
        {
          "id": "y",
          "type": "number",
          "name_zh": "Y",
          "name_en": "Y"
        }
      ]
    },
    {
      "id": "has-los-between-positions",
      "name_zh": "发现位置 (范围)",
      "name_en": "Has LOS between positions",
      "description_zh": "检测在场景任意 2 个位置之间，是否存在视线。",
      "description_en": "Test if there is line-of-sight between any two positions in the layout.",
      "scriptName": "HasLOSBetweenPositions",
      "params": [
        {
          "id": "from-x",
          "type": "number",
          "name_zh": "起始 X",
          "name_en": "From X"
        },
        {
          "id": "from-y",
          "type": "number",
          "name_zh": "起始 Y",
          "name_en": "From Y"
        },
        {
          "id": "from-angle",
          "type": "number",
          "name_zh": "角度",
          "name_en": "Angle"
        },
        {
          "id": "to-x",
          "type": "number",
          "name_zh": "终点 X",
          "name_en": "To X"
        },
        {
          "id": "to-y",
          "type": "number",
          "name_zh": "终点 Y",
          "name_en": "To Y"
        }
      ]
    },
    {
      "id": "ray-intersected",
      "name_zh": "发现障碍物",
      "name_en": "Ray intersected",
      "description_zh": "检查上次发出的射线是否命中障碍物。",
      "description_en": "Test if the last cast ray intersected an obstacle.",
      "scriptName": "RayIntersected"
    }
  ],
  "actions": [
    {
      "id": "set-range",
      "name_zh": "设置视线范围",
      "name_en": "Set range",
      "description_zh": "设置视线能覆盖的最远距离，以像素为单位。",
      "description_en": "Set the maximum range the line-of-sight can cover.",
      "scriptName": "SetRange",
      "params": [
        {
          "id": "range",
          "type": "number",
          "name_zh": "范围",
          "name_en": "Range",
          "initialValue": "10000"
        }
      ]
    },
    {
      "id": "set-cone-of-view",
      "name_zh": "设置视线角度",
      "name_en": "Set cone of view",
      "description_zh": "设置视线在当前朝向能够覆盖的角度范围，以角度为单位。",
      "description_en": "Set the angle range relative to the object angle that line-of-sight can cover.",
      "scriptName": "SetCone",
      "params": [
        {
          "id": "cone-of-view",
          "type": "number",
          "name_zh": "角度",
          "name_en": "Cone of view",
          "initialValue": "360"
        }
      ]
    },
    {
      "id": "add-obstacle",
      "name_zh": "添加遮挡物",
      "name_en": "Add obstacle",
      "description_zh": "添加自定义对象作为视线遮挡物。",
      "description_en": "Add a custom object as an obstacle to line-of-sight.",
      "scriptName": "AddObstacle",
      "params": [
        {
          "id": "obstacle",
          "type": "object",
          "name_zh": "遮挡物",
          "name_en": "Obstacle"
        }
      ]
    },
    {
      "id": "clear-obstacles",
      "name_zh": "清空障碍",
      "name_en": "Clear obstacles",
      "description_zh": "删除所有已添加的障碍。",
      "description_en": "Remove all added obstacle objects.",
      "scriptName": "ClearObstacles"
    },
    {
      "id": "cast-ray",
      "name_zh": "发出射线",
      "name_en": "Cast ray",
      "description_zh": "在任意两个坐标位置之间投出射线，检查是否有障碍物。",
      "description_en": "Cast a ray between any two positions in the layout, checking for obstructions.",
      "scriptName": "CastRay",
      "params": [
        {
          "id": "from-x",
          "type": "number",
          "name_zh": "起始 X",
          "name_en": "From X",
          "initialValue": "Self.X"
        },
        {
          "id": "from-y",
          "type": "number",
          "name_zh": "起始 Y",
          "name_en": "From Y",
          "initialValue": "Self.Y"
        },
        {
          "id": "to-x",
          "type": "number",
          "name_zh": "目标 X",
          "name_en": "To X"
        },
        {
          "id": "to-y",
          "type": "number",
          "name_zh": "目标 Y",
          "name_en": "To Y"
        },
        {
          "id": "use-collision-cells",
          "type": "boolean",
          "name_zh": "使用碰撞单元",
          "name_en": "Use collision cells",
          "initialValue": "true"
        }
      ]
    }
  ],
  "expressions": [
    {
      "id": "range",
      "name_zh": "",
      "name_en": "",
      "description_zh": "返回视线当前的范围，以像素为单位。",
      "description_en": "Return the current range in pixels that line-of-sight can cover.",
      "expressionName": "Range",
      "returnType": "number"
    },
    {
      "id": "coneofview",
      "name_zh": "",
      "name_en": "",
      "description_zh": "返回视线当前的覆盖角度，以像素为单位。",
      "description_en": "Return the current cone of view in degrees.",
      "expressionName": "ConeOfView",
      "returnType": "number"
    },
    {
      "id": "hitx",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标时，返回相交位置的X坐标。",
      "description_en": "Return the X position of the hit position.",
      "expressionName": "HitX",
      "returnType": "number"
    },
    {
      "id": "hity",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标时，返回相交位置的Y坐标。",
      "description_en": "Return the Y position of the hit position.",
      "expressionName": "HitY",
      "returnType": "number"
    },
    {
      "id": "hituid",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标时，返回相交的实例对象UID。",
      "description_en": "Return the UID of the instance that was hit.",
      "expressionName": "HitUID",
      "returnType": "number"
    },
    {
      "id": "hitdistance",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标时，返回视线原点和相交位置的距离。",
      "description_en": "Return the distance between the ray origin and hit position.",
      "expressionName": "HitDistance",
      "returnType": "number"
    },
    {
      "id": "normalx",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标后，返回命中沿法线延长指定距离位置的X坐标。",
      "description_en": "Return the X position at a distance along the hit normal.",
      "expressionName": "NormalX",
      "returnType": "number",
      "params": [
        {
          "id": "length",
          "type": "number",
          "name_zh": "长度",
          "name_en": "length"
        }
      ]
    },
    {
      "id": "normaly",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标后，返回命中沿法线延长指定距离位置的Y坐标。",
      "description_en": "Return the Y position at a distance along the hit normal",
      "expressionName": "NormalY",
      "returnType": "number",
      "params": [
        {
          "id": "length",
          "type": "number",
          "name_zh": "长度",
          "name_en": "length"
        }
      ]
    },
    {
      "id": "normalangle",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标后，返回命中位置表面法线的角度。",
      "description_en": "Return the angle for the surface normal at the hit position.",
      "expressionName": "NormalAngle",
      "returnType": "number"
    },
    {
      "id": "reflectionx",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标后，返回沿法线反射角度指定距离位置的X坐标。",
      "description_en": "Return the X position at a distance along the hit reflection angle.",
      "expressionName": "ReflectionX",
      "returnType": "number",
      "params": [
        {
          "id": "length",
          "type": "number",
          "name_zh": "长度",
          "name_en": "length"
        }
      ]
    },
    {
      "id": "reflectiony",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标后，返回沿法线反射角度指定距离位置的Y坐标。",
      "description_en": "Return the Y position at a distance along the hit reflection angle.",
      "expressionName": "ReflectionY",
      "returnType": "number",
      "params": [
        {
          "id": "length",
          "type": "number",
          "name_zh": "长度",
          "name_en": "length"
        }
      ]
    },
    {
      "id": "reflectionangle",
      "name_zh": "",
      "name_en": "",
      "description_zh": "视线击中目标后，返回命中位置反射的绝对角度。",
      "description_en": "Return the absolute angle of the ray reflection at the hit position.",
      "expressionName": "ReflectionAngle",
      "returnType": "number"
    }
  ],
  "properties": [
    {
      "id": "obstacles",
      "name_zh": "遮挡物",
      "name_en": "Obstacles",
      "description_zh": "选择哪些对象可以被视线对象识别为遮挡物，阻挡视线。选择 '自定义' 将由事件添加。",
      "description_en": "Choose whether solids obstruct LOS or if to use custom objects added by events.",
      "items": {
        "solids": {
          "zh": "实体",
          "en": "Solids"
        },
        "custom": {
          "zh": "自定义",
          "en": "Custom"
        }
      }
    },
    {
      "id": "range",
      "name_zh": "范围",
      "name_en": "Range",
      "description_zh": "视线能覆盖的最远距离，以像素为单位。",
      "description_en": "The maximum distance in pixels that line-of-sight can cover."
    },
    {
      "id": "cone-of-view",
      "name_zh": "角度",
      "name_en": "Cone of view",
      "description_zh": "视线在朝向能覆盖的角度范围，以角度为单位。",
      "description_en": "The angle range in degrees relative to the object angle that line-of-sight can cover."
    },
    {
      "id": "use-collision-cells",
      "name_zh": "使用碰撞单元",
      "name_en": "Use collision cells",
      "description_zh": "启用此选项通常可以提升性能，若目标在距离很远的地方，性能反而会变慢。",
      "description_en": "Enabling usually improves performance, but can be slower over very long distances."
    }
  ],
  "productTypes": "games"
}