{
  "id": "pathfinding",
  "originalId": "Pathfinding",
  "name_zh": "寻路",
  "name_en": "Pathfinding",
  "description_zh": "寻找前往某个位置的路线并绕过途径的障碍物。",
  "description_en": "Find paths around obstacles, and optionally move along them.",
  "path": "movements/pathfinding",
  "categories": [
    "movement",
    "path",
    "rabbit",
    "settings"
  ],
  "conditions": [
    {
      "id": "on-path-found",
      "name_zh": "找到路线",
      "name_en": "On path found",
      "description_zh": "执行在寻路动作后，成功找到寻路路线时触发。",
      "description_en": "Triggered after 'Find path' when a path successfully found.",
      "scriptName": "OnPathFound",
      "isTrigger": true
    },
    {
      "id": "on-failed-to-find-path",
      "name_zh": "寻找路线失败",
      "name_en": "On failed to find path",
      "description_zh": "执行在寻路动作后，无法找到寻路路线时触发。",
      "description_en": "Triggered after 'Find path' when no path could be found.",
      "scriptName": "OnFailedToFindPath",
      "isTrigger": true
    },
    {
      "id": "is-cell-obstacle",
      "name_zh": "检查单元格位置存在障碍物",
      "name_en": "Is cell obstacle",
      "description_zh": "检测指定的单元格坐标位置是否存在障碍物。",
      "description_en": "Test if a cell in the pathfinding map is marked as an obstacle.",
      "scriptName": "IsCellObstacle",
      "params": [
        {
          "id": "cell-x",
          "type": "number",
          "name_zh": "单元格X",
          "name_en": "Cell X"
        },
        {
          "id": "cell-y",
          "type": "number",
          "name_zh": "单元格Y",
          "name_en": "Cell Y"
        }
      ]
    },
    {
      "id": "is-calculating-path",
      "name_zh": "正在计算路线",
      "name_en": "Is calculating path",
      "description_zh": "检测对象当前是否正在寻找路线。",
      "description_en": "True if the object is currently searching for a path.",
      "scriptName": "IsCalculatingPath"
    },
    {
      "id": "is-moving-along-path",
      "name_zh": "正沿着路线移动",
      "name_en": "Is moving along path",
      "description_zh": "检测对象是否正沿着一条已找到的路线移动。",
      "description_en": "True if the object is currently moving along a found path.",
      "scriptName": "IsMoving"
    },
    {
      "id": "on-arrived",
      "name_zh": "到达目的地",
      "name_en": "On arrived",
      "description_zh": "当沿着路线移动并抵达目的时触发",
      "description_en": "Triggered when moving along path and arrived at destination.",
      "scriptName": "OnArrived",
      "isTrigger": true
    },
    {
      "id": "compare-speed",
      "name_zh": "比较移动速度",
      "name_en": "Compare speed",
      "description_zh": "以当前对象的移动速度进行对比",
      "description_en": "Compare the current movement speed of the object.",
      "scriptName": "CompareSpeed",
      "params": [
        {
          "id": "comparison",
          "type": "cmp",
          "name_zh": "比较",
          "name_en": "Comparison"
        },
        {
          "id": "speed",
          "type": "number",
          "name_zh": "速度",
          "name_en": "Speed"
        }
      ]
    },
    {
      "id": "diagonals-are-enabled",
      "name_zh": "允许斜向移动",
      "name_en": "Diagonals are enabled",
      "description_zh": "检测是否允许跨越单元格进行斜向对角移动。",
      "description_en": "True if diagonal movement across cells is currently enabled.",
      "scriptName": "DiagonalsEnabled"
    },
    {
      "id": "is-enabled",
      "name_zh": "已启用",
      "name_en": "Is enabled",
      "description_zh": "检测当前行为是否已启用。",
      "description_en": "Test if the behavior is enabled.",
      "scriptName": "IsEnabled"
    }
  ],
  "actions": [
    {
      "id": "find-path",
      "name_zh": "寻找路线",
      "name_en": "Find path",
      "description_zh": "开始寻找前往目的地的路线，完成后将会触发 '找到路线' 或 '寻找路线失败'。",
      "description_en": "Start looking for a path to a destination, later triggering 'On path found' or 'On failed to find path'.",
      "scriptName": "FindPath",
      "isAsync": true,
      "params": [
        {
          "id": "x",
          "type": "number",
          "name_zh": "X",
          "name_en": "X"
        },
        {
          "id": "y",
          "type": "number",
          "name_zh": "Y",
          "name_en": "Y"
        }
      ]
    },
    {
      "id": "set-enabled",
      "name_zh": "设置启用",
      "name_en": "Set enabled",
      "description_zh": "启用或禁用此行为。",
      "description_en": "Enable or disable the behavior.",
      "scriptName": "SetEnabled",
      "params": [
        {
          "id": "set",
          "type": "combo",
          "name_zh": "设置",
          "name_en": "Set",
          "items": [
            "disabled",
            "enabled"
          ],
          "items_i18n": {
            "disabled": {
              "zh": "禁用",
              "en": "disabled"
            },
            "enabled": {
              "zh": "启用",
              "en": "enabled"
            }
          }
        }
      ]
    },
    {
      "id": "regenerate-obstacle-map",
      "name_zh": "重新生成障碍物地图",
      "name_en": "Regenerate obstacle map",
      "description_zh": "重新检查场景内的每个单元格，检测障碍物是否存在，防止障碍物的位置已经改变。注意，此动作需要一定时间，在下一帧触发完成条件。",
      "description_en": "(Slow) Check every cell to determine if it is an obstacle again, in case obstacles have moved or changed. Completes next tick.",
      "scriptName": "RegenerateMap",
      "isAsync": true
    },
    {
      "id": "add-obstacle",
      "name_zh": "添加障碍物",
      "name_en": "Add obstacle",
      "description_zh": "使用自定义障碍物时，添加一个家族对象或特定对象作为目标。",
      "description_en": "When using custom obstacles, add a family or object as an obstacle.",
      "scriptName": "AddObstacle",
      "params": [
        {
          "id": "obstacle",
          "type": "object",
          "name_zh": "障碍物",
          "name_en": "Obstacle"
        }
      ]
    },
    {
      "id": "clear-obstacles",
      "name_zh": "清除障碍物",
      "name_en": "Clear obstacles",
      "description_zh": "清除所有添加的自定义障碍物。",
      "description_en": "Clear the added custom obstacles.",
      "scriptName": "ClearObstacles"
    },
    {
      "id": "set-move-cost",
      "name_zh": "设置移动成本",
      "name_en": "Set move cost",
      "description_zh": "设置移动到相邻单元格的基本成本，这会影响其他成本的相对效果。",
      "description_en": "Set the basic cost for moving to an adjacent cell, which affects the relative effect of other costs.",
      "scriptName": "SetMoveCost",
      "params": [
        {
          "id": "move-cost",
          "type": "number",
          "name_zh": "移动成本",
          "name_en": "Move cost",
          "initialValue": "10"
        }
      ]
    },
    {
      "id": "add-path-cost",
      "name_zh": "增加路径成本",
      "name_en": "Add path cost",
      "description_zh": "增加对象在前进路径的成本，用于模拟不同的地形的难易度。",
      "description_en": "Increase the path cost for travelling over an object (e.g. to simulate rough terrain).",
      "scriptName": "AddCost",
      "params": [
        {
          "id": "object",
          "type": "object",
          "name_zh": "目标",
          "name_en": "Object"
        },
        {
          "id": "cost",
          "type": "number",
          "name_zh": "成本",
          "name_en": "Cost",
          "initialValue": "50"
        }
      ]
    },
    {
      "id": "clear-cost",
      "name_zh": "清除额外成本",
      "name_en": "Clear cost",
      "description_zh": "清除当前添加的所有额外寻路成本",
      "description_en": "Clear any additional path cost that was previously added.",
      "scriptName": "ClearCost"
    },
    {
      "id": "regenerate-region",
      "name_zh": "重新生成区域",
      "name_en": "Regenerate region",
      "description_zh": "从场景坐标中的矩形区域重新生成障碍物地图。下次运行事件时完成(即下一帧)。",
      "description_en": "Regenerate just a rectangular portion of the obstacle map in layout co-ordinates. Completes next tick.",
      "scriptName": "RegenerateRegion",
      "isAsync": true,
      "params": [
        {
          "id": "start-x",
          "type": "number",
          "name_zh": "开始 X",
          "name_en": "Start X"
        },
        {
          "id": "start-y",
          "type": "number",
          "name_zh": "开始 Y",
          "name_en": "Start Y"
        },
        {
          "id": "end-x",
          "type": "number",
          "name_zh": "结束 X",
          "name_en": "End X"
        },
        {
          "id": "end-y",
          "type": "number",
          "name_zh": "结束 Y",
          "name_en": "End Y"
        }
      ]
    },
    {
      "id": "regenerate-region-around-object",
      "name_zh": "重新生成物体周围的区域",
      "name_en": "Regenerate region around object",
      "description_zh": "从指定对象的边界框中重新生成障碍路线。此动作需要到下一个运行周期完成。",
      "description_en": "Regenerate just a rectangular portion of the obstacle map from an object's bounding box. Completes next tick.",
      "scriptName": "RegenerateObjectRegion",
      "isAsync": true,
      "params": [
        {
          "id": "object",
          "type": "object",
          "name_zh": "目标",
          "name_en": "Object"
        }
      ]
    },
    {
      "id": "start-path-group",
      "name_zh": "开始路径组",
      "name_en": "Start path group",
      "description_zh": "对相同分组的寻路路径四周增加临时寻路成本来分散路径，防止它们采用完全相同的路径。",
      "description_en": "Spread out paths by adding a temporary extra cost around found paths in the same group.",
      "scriptName": "StartPathGroup",
      "params": [
        {
          "id": "base-cost",
          "type": "number",
          "name_zh": "基础成本",
          "name_en": "Base cost",
          "initialValue": "1"
        },
        {
          "id": "cell-spread",
          "type": "number",
          "name_zh": "分散单元格",
          "name_en": "Cell spread",
          "initialValue": "1"
        },
        {
          "id": "max-workers",
          "type": "number",
          "name_zh": "最大线程数",
          "name_en": "Max workers",
          "initialValue": "1"
        }
      ]
    },
    {
      "id": "end-path-group",
      "name_zh": "结束路径组",
      "name_en": "End path group",
      "description_zh": "结束一个路径组，恢复正常的寻路。",
      "description_en": "End a path group, restoring normal pathfinding.",
      "scriptName": "EndPathGroup"
    },
    {
      "id": "move-along-path",
      "name_zh": "沿着路线移动",
      "name_en": "Move along path",
      "description_zh": "在 '找到路线' 条件中使用。开始沿着一条找到的路线移动。",
      "description_en": "Start moving along a found path after the 'On path found' trigger.",
      "scriptName": "StartMoving",
      "category": "movement"
    },
    {
      "id": "stop",
      "name_zh": "停止",
      "name_en": "Stop",
      "description_zh": "停止沿着路线移动",
      "description_en": "Stop moving along a path.",
      "scriptName": "Stop",
      "category": "movement"
    },
    {
      "id": "set-max-speed",
      "name_zh": "设置最大移动速度",
      "name_en": "Set max speed",
      "description_zh": "设置移动时可达到的最大移动速度，以像素/秒为单位。",
      "description_en": "Set the maximum speed for moving along paths.",
      "scriptName": "SetMaxSpeed",
      "category": "movement",
      "params": [
        {
          "id": "speed",
          "type": "number",
          "name_zh": "速度",
          "name_en": "Speed"
        }
      ]
    },
    {
      "id": "set-acceleration",
      "name_zh": "设置加速度",
      "name_en": "Set acceleration",
      "description_zh": "设置沿路径移动时的加速度。",
      "description_en": "Set the acceleration for moving along paths.",
      "scriptName": "SetAcc",
      "category": "movement",
      "params": [
        {
          "id": "acceleration",
          "type": "number",
          "name_zh": "加速度",
          "name_en": "Acceleration"
        }
      ]
    },
    {
      "id": "set-deceleration",
      "name_zh": "设置减速度",
      "name_en": "Set deceleration",
      "description_zh": "设置沿路径移动时的减速度。",
      "description_en": "Set the deceleration for moving along paths.",
      "scriptName": "SetDec",
      "category": "movement",
      "params": [
        {
          "id": "deceleration",
          "type": "number",
          "name_zh": "减速度",
          "name_en": "Deceleration"
        }
      ]
    },
    {
      "id": "set-rotate-speed",
      "name_zh": "设置转向速度",
      "name_en": "Set rotate speed",
      "description_zh": "设置沿路径移动时的转向速度。",
      "description_en": "Set the turn speed for moving along paths.",
      "scriptName": "SetRotateSpeed",
      "category": "movement",
      "params": [
        {
          "id": "rotate-speed",
          "type": "number",
          "name_zh": "转向速度",
          "name_en": "Rotate speed"
        }
      ]
    },
    {
      "id": "set-diagonals-enabled",
      "name_zh": "启用对角线移动",
      "name_en": "Set diagonals enabled",
      "description_zh": "启用或禁用穿过单元格时的对角线移动",
      "description_en": "Enable or disable diagonal movement across cells.",
      "scriptName": "SetDiagonalsEnabled",
      "category": "movement",
      "params": [
        {
          "id": "diagonals",
          "type": "combo",
          "name_zh": "对角线",
          "name_en": "Diagonals",
          "items": [
            "disabled",
            "enabled"
          ],
          "items_i18n": {
            "disabled": {
              "zh": "禁用",
              "en": "disabled"
            },
            "enabled": {
              "zh": "启用",
              "en": "enabled"
            }
          }
        }
      ]
    },
    {
      "id": "set-direct-movement",
      "name_zh": "设置直接移动模式",
      "name_en": "Set direct movement",
      "description_zh": "设置 '直接移动' 模式。当周围没有障碍物时，如何向下一个路径点移动。",
      "description_en": "Set where to allow moving directly towards a node when the surrounding area is clear.",
      "scriptName": "SetDirectMovement",
      "category": "movement",
      "params": [
        {
          "id": "mode",
          "type": "combo",
          "name_zh": "直接移动",
          "name_en": "Direct movement",
          "items": [
            "none",
            "to-destination",
            "anywhere-along-path"
          ],
          "items_i18n": {
            "none": {
              "zh": "禁止",
              "en": "None"
            },
            "to-destination": {
              "zh": "前往目的地",
              "en": "To destination"
            },
            "anywhere-along-path": {
              "zh": "沿路径任意点",
              "en": "Anywhere along path"
            }
          }
        }
      ]
    },
    {
      "id": "set-speed",
      "name_zh": "设置速度",
      "name_en": "Set speed",
      "description_zh": "设置沿路径移动时的移动速度。",
      "description_en": "Set the current speed for moving along paths.",
      "scriptName": "SetSpeed",
      "category": "movement",
      "params": [
        {
          "id": "speed",
          "type": "number",
          "name_zh": "速度",
          "name_en": "Speed"
        }
      ]
    }
  ],
  "expressions": [
    {
      "id": "nodecount",
      "name_zh": "",
      "name_en": "",
      "description_zh": "沿着找到的路径途中的节点数。",
      "description_en": "The number of nodes along a found path.",
      "expressionName": "NodeCount",
      "returnType": "number",
      "category": "path"
    },
    {
      "id": "nodexat",
      "name_zh": "",
      "name_en": "",
      "description_zh": "获取路径节点的X坐标。",
      "description_en": "The X co-ordinate of a node at an index.",
      "expressionName": "NodeXAt",
      "returnType": "number",
      "category": "path",
      "params": [
        {
          "id": "index",
          "type": "number",
          "name_zh": "索引",
          "name_en": "Index"
        }
      ]
    },
    {
      "id": "nodeyat",
      "name_zh": "",
      "name_en": "",
      "description_zh": "获取路径节点的Y坐标。",
      "description_en": "The Y co-ordinate of a node at an index.",
      "expressionName": "NodeYAt",
      "returnType": "number",
      "category": "path",
      "params": [
        {
          "id": "index",
          "type": "number",
          "name_zh": "索引",
          "name_en": "Index"
        }
      ]
    },
    {
      "id": "movingangle",
      "name_zh": "",
      "name_en": "",
      "description_zh": "当前的移动角度，以角度/秒为单位。",
      "description_en": "The current angle of motion along a path, in degrees.",
      "expressionName": "MovingAngle",
      "returnType": "number",
      "category": "path"
    },
    {
      "id": "currentnode",
      "name_zh": "",
      "name_en": "",
      "description_zh": "当前朝向的路径节点，从 0 开始计数。",
      "description_en": "The current zero-based node index moving towards.",
      "expressionName": "CurrentNode",
      "returnType": "number",
      "category": "path"
    },
    {
      "id": "speed",
      "name_zh": "",
      "name_en": "",
      "description_zh": "当前的移动速度，以像素/秒为单位。",
      "description_en": "The current speed in pixels per second while moving.",
      "expressionName": "Speed",
      "returnType": "number",
      "category": "path"
    },
    {
      "id": "rabbitx",
      "name_zh": "",
      "name_en": "",
      "description_zh": "",
      "description_en": "",
      "expressionName": "RabbitX",
      "returnType": "number",
      "isDeprecated": true,
      "category": "rabbit"
    },
    {
      "id": "rabbity",
      "name_zh": "",
      "name_en": "",
      "description_zh": "",
      "description_en": "",
      "expressionName": "RabbitY",
      "returnType": "number",
      "isDeprecated": true,
      "category": "rabbit"
    },
    {
      "id": "cellsize",
      "name_zh": "",
      "name_en": "",
      "description_zh": "当前单元格大小",
      "description_en": "The current cell size property.",
      "expressionName": "CellSize",
      "returnType": "number",
      "category": "settings"
    },
    {
      "id": "maxspeed",
      "name_zh": "",
      "name_en": "",
      "description_zh": "当前最高速度，以像素/秒为单位",
      "description_en": "The current maximum speed in pixels per second.",
      "expressionName": "MaxSpeed",
      "returnType": "number",
      "category": "settings"
    },
    {
      "id": "acceleration",
      "name_zh": "",
      "name_en": "",
      "description_zh": "从静止状态到正常移动速度的加速度，以像素/秒为单位。",
      "description_en": "The current acceleration in pixels per second per second.",
      "expressionName": "Acceleration",
      "returnType": "number",
      "category": "settings"
    },
    {
      "id": "deceleration",
      "name_zh": "",
      "name_en": "",
      "description_zh": "从正常移动至完全停止的减速度，以像素/秒为单位。",
      "description_en": "The current deceleration in pixels per second per second.",
      "expressionName": "Deceleration",
      "returnType": "number",
      "category": "settings"
    },
    {
      "id": "rotatespeed",
      "name_zh": "",
      "name_en": "",
      "description_zh": "当前最大转向速度，以角度/秒为单位。",
      "description_en": "The current maximum turn speed in degrees per second.",
      "expressionName": "RotateSpeed",
      "returnType": "number",
      "category": "settings"
    }
  ],
  "properties": [
    {
      "id": "cell-size",
      "name_zh": "单元格大小",
      "name_en": "Cell size",
      "description_zh": "路线使用的单元格大小。单元格越小寻路越精细，CPU负载也更大。",
      "description_en": "The size of cells for pathfinding. Smaller sizes will use more CPU."
    },
    {
      "id": "cell-border",
      "name_zh": "单元格边界",
      "name_en": "Cell border",
      "description_zh": "用于侦测障碍物的额外尺寸，以防止行进路线过于贴近障碍物",
      "description_en": "Additional size to detect obstacles. Prevents paths very close to obstacles."
    },
    {
      "id": "obstacles",
      "name_zh": "障碍物",
      "name_en": "Obstacles",
      "description_zh": "指定实体对象或自定义对象作为障碍物。",
      "description_en": "Use either solids or custom objects as obstacles.",
      "items": {
        "solids": {
          "zh": "实体",
          "en": "Solids"
        },
        "custom": {
          "zh": "自定义",
          "en": "Custom"
        }
      }
    },
    {
      "id": "max-speed",
      "name_zh": "最大移动速度",
      "name_en": "Max speed",
      "description_zh": "移动时可达到的最大移动速度，以像素/秒为单位。",
      "description_en": "For movement, the maximum speed in pixels per second."
    },
    {
      "id": "acceleration",
      "name_zh": "加速度",
      "name_en": "Acceleration",
      "description_zh": "从静止状态到正常移动速度的加速度，以像素/秒为单位。",
      "description_en": "For movement, the acceleration in pixels per second per second."
    },
    {
      "id": "deceleration",
      "name_zh": "减速度",
      "name_en": "Deceleration",
      "description_zh": "从正常移动至完全停止的减速度，以像素/秒为单位。",
      "description_en": "For movement, the deceleration in pixels per second per second."
    },
    {
      "id": "rotate-speed",
      "name_zh": "转向速度",
      "name_en": "Rotate speed",
      "description_zh": "移动时的转向速度,以度/秒为单位。",
      "description_en": "For movement, the maximum turn speed in degrees per second."
    },
    {
      "id": "rotate-object",
      "name_zh": "旋转对象",
      "name_en": "Rotate object",
      "description_zh": "移动中是否改变对象的角度",
      "description_en": "For movement, whether to change the object's angle."
    },
    {
      "id": "diagonals",
      "name_zh": "对角线",
      "name_en": "Diagonals",
      "description_zh": "是否允许路径使用对角线方向",
      "description_en": "Whether paths are allowed to use diagonal directions."
    },
    {
      "id": "enabled",
      "name_zh": "启用",
      "name_en": "Enabled",
      "description_zh": "游戏初始化时，是否默认启用该行为。",
      "description_en": "Whether the behavior is initially enabled or disabled."
    },
    {
      "id": "direct-movement",
      "name_zh": "直接移动",
      "name_en": "Direct movement",
      "description_zh": "当周围没有障碍物时，允许直接向下一个节点移动。",
      "description_en": "Where to allow moving directly towards a node when the surrounding area is clear.",
      "items": {
        "none": {
          "zh": "禁用",
          "en": "None"
        },
        "to-destination": {
          "zh": "前往目的地",
          "en": "To destination"
        },
        "anywhere-along-path": {
          "zh": "沿路径任意点",
          "en": "Anywhere along path"
        }
      }
    }
  ],
  "productTypes": "games"
}